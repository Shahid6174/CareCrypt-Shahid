# EHR CareCrypt - Complete System Flow Diagrams

**Date:** November 24, 2025  
**Version:** 1.0.0

---

## ğŸ“‹ Table of Contents

1. [System Architecture](#1-system-architecture)
2. [User Authentication Flow](#2-user-authentication-flow)
3. [Patient Workflow](#3-patient-workflow)
4. [Doctor Workflow](#4-doctor-workflow)
5. [Insurance Agent Workflow](#5-insurance-agent-workflow)
6. [Admin Workflow](#6-admin-workflow)
7. [Fraud Detection Flow](#7-fraud-detection-flow)
8. [AI Chatbot Flow](#8-ai-chatbot-flow)
9. [Document Management Flow](#9-document-management-flow)
10. [Blockchain Data Flow](#10-blockchain-data-flow)
11. [Complete Claim Lifecycle](#11-complete-claim-lifecycle)
12. [API Request Flow](#12-api-request-flow)

---

## 1. System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          EHR CARECRYPT SYSTEM                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           FRONTEND LAYER                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚   Patient   â”‚  â”‚   Doctor    â”‚  â”‚  Insurance  â”‚  â”‚    Admin    â”‚â”‚
â”‚  â”‚  Dashboard  â”‚  â”‚  Dashboard  â”‚  â”‚  Dashboard  â”‚  â”‚  Dashboard  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚         â”‚                â”‚                 â”‚                 â”‚       â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                  â”‚                                    â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚                          â”‚  React Router   â”‚                         â”‚
â”‚                          â”‚  API Service    â”‚                         â”‚
â”‚                          â”‚  (Axios)        â”‚                         â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   HTTP/HTTPS (Port 5000)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           BACKEND LAYER                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚                          â”‚  Express.js     â”‚                         â”‚
â”‚                          â”‚  API Server     â”‚                         â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                  â”‚                                    â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚        â”‚                         â”‚                         â”‚         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”    â”‚
â”‚   â”‚ Routes  â”‚              â”‚Services â”‚              â”‚  Utils  â”‚    â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚   â”‚ Auth    â”‚              â”‚ Fraud   â”‚              â”‚ OCR     â”‚    â”‚
â”‚   â”‚ Patient â”‚              â”‚ Chatbot â”‚              â”‚ Scorer  â”‚    â”‚
â”‚   â”‚ Doctor  â”‚              â”‚ Fabric  â”‚              â”‚ Responseâ”‚    â”‚
â”‚   â”‚ Insuranceâ”‚             â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚   â”‚ Admin   â”‚                   â”‚                                   â”‚
â”‚   â”‚ Claims  â”‚                   â”‚                                   â”‚
â”‚   â”‚ Documentsâ”‚                  â”‚                                   â”‚
â”‚   â”‚ Fraud   â”‚                   â”‚                                   â”‚
â”‚   â”‚ Chatbot â”‚                   â”‚                                   â”‚
â”‚   â”‚ Health  â”‚                   â”‚                                   â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                   â”‚                                   â”‚
â”‚        â”‚                        â”‚                                    â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚                                 â”‚                        â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚                        â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                    â”‚   â”‚                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”
â”‚    MONGODB DATABASE      â”‚   â”‚  HYPERLEDGER FABRIC  â”‚   â”‚  AI SERVICES  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Users            â”‚  â”‚   â”‚  â”‚  Organization1 â”‚ â”‚   â”‚ â”‚ Tesseract â”‚ â”‚
â”‚  â”‚   - Authentication â”‚  â”‚   â”‚  â”‚   (Hospital)   â”‚ â”‚   â”‚ â”‚    OCR    â”‚ â”‚
â”‚  â”‚   - Profiles       â”‚  â”‚   â”‚  â”‚  - Peers       â”‚ â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚   - Documents      â”‚  â”‚   â”‚  â”‚  - CA          â”‚ â”‚   â”‚               â”‚
â”‚  â”‚   - Fraud Data     â”‚  â”‚   â”‚  â”‚  - Wallets     â”‚ â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â”‚  Azure    â”‚ â”‚
â”‚                          â”‚   â”‚                      â”‚   â”‚ â”‚  OpenAI   â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”‚ Chatbot   â”‚ â”‚
â”‚  â”‚   Conversations    â”‚  â”‚   â”‚  â”‚  Organization2 â”‚ â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚   - Chat History   â”‚  â”‚   â”‚  â”‚  (Insurance)   â”‚ â”‚   â”‚               â”‚
â”‚  â”‚   - Sessions       â”‚  â”‚   â”‚  â”‚  - Peers       â”‚ â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â”‚   - Tokens         â”‚  â”‚   â”‚  â”‚  - CA          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚  â”‚  - Wallets     â”‚ â”‚
â”‚                          â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚   â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                               â”‚  â”‚   Chaincode    â”‚ â”‚
                               â”‚  â”‚  (Smart        â”‚ â”‚
                               â”‚  â”‚   Contracts)   â”‚ â”‚
                               â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                               â”‚                      â”‚
                               â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                               â”‚  â”‚   Ledger       â”‚ â”‚
                               â”‚  â”‚  - Blocks      â”‚ â”‚
                               â”‚  â”‚  - Transactionsâ”‚ â”‚
                               â”‚  â”‚  - World State â”‚ â”‚
                               â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. User Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     USER AUTHENTICATION FLOW                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚     User     â”‚
                            â”‚  (Patient/   â”‚
                            â”‚ Doctor/Agent)â”‚
                            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Registration or Login?      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚              â”‚
                    REGISTRATION      LOGIN
                           â”‚              â”‚
                           â–¼              â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  Register Page  â”‚  â”‚   Login Page    â”‚
                 â”‚  - Email        â”‚  â”‚  - Email        â”‚
                 â”‚  - Password     â”‚  â”‚  - Password     â”‚
                 â”‚  - Name         â”‚  â”‚                 â”‚
                 â”‚  - Role-specificâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚    fields       â”‚           â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
                          â”‚                    â”‚
                          â–¼                    â–¼
           POST /auth/register[Role]    POST /auth/login[Role]
                          â”‚                    â”‚
                          â–¼                    â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  BACKEND:       â”‚  â”‚  BACKEND:       â”‚
                 â”‚  1. Validate    â”‚  â”‚  1. Validate    â”‚
                 â”‚  2. Hash pwd    â”‚  â”‚  2. Check DB    â”‚
                 â”‚  3. Save to     â”‚  â”‚  3. Verify pwd  â”‚
                 â”‚     MongoDB     â”‚  â”‚  4. Return user â”‚
                 â”‚  4. Return      â”‚  â”‚     data        â”‚
                 â”‚     userId      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
                          â”‚                    â”‚
                          â–¼                    â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
                 â”‚  Status:        â”‚           â”‚
                 â”‚  PENDING        â”‚           â”‚
                 â”‚  (Need admin    â”‚           â”‚
                 â”‚   approval)     â”‚           â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
                          â”‚                    â”‚
                          â–¼                    â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
                 â”‚  ADMIN APPROVES â”‚           â”‚
                 â”‚  Registration   â”‚           â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
                          â”‚                    â”‚
                          â–¼                    â”‚
        POST /auth/complete[Role]Registration  â”‚
                          â”‚                    â”‚
                          â–¼                    â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
                 â”‚  BACKEND:       â”‚           â”‚
                 â”‚  1. Create      â”‚           â”‚
                 â”‚     wallet      â”‚           â”‚
                 â”‚     identity    â”‚           â”‚
                 â”‚  2. Register on â”‚           â”‚
                 â”‚     blockchain  â”‚           â”‚
                 â”‚  3. Update      â”‚           â”‚
                 â”‚     MongoDB     â”‚           â”‚
                 â”‚     status      â”‚           â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
                          â”‚                    â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚  Save to        â”‚
                          â”‚  localStorage:  â”‚
                          â”‚  - user object  â”‚
                          â”‚  - userId       â”‚
                          â”‚  - role         â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚  Redirect to    â”‚
                          â”‚  Role-specific  â”‚
                          â”‚  Dashboard      â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                             â”‚
              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
              â”‚  Patient   â”‚              â”‚   Doctor    â”‚
              â”‚ Dashboard  â”‚              â”‚  Dashboard  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                             â”‚
              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
              â”‚ Insurance  â”‚              â”‚    Admin    â”‚
              â”‚ Dashboard  â”‚              â”‚  Dashboard  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ONGOING SESSION                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  Every API Request:                                              â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚  â”‚  Frontend       â”‚                                            â”‚
â”‚  â”‚  (Axios         â”‚                                            â”‚
â”‚  â”‚   Interceptor)  â”‚                                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚           â”‚                                                      â”‚
â”‚           â–¼                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚  â”‚  Read user from â”‚                                            â”‚
â”‚  â”‚  localStorage   â”‚                                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚           â”‚                                                      â”‚
â”‚           â–¼                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚  â”‚  Add x-userid   â”‚                                            â”‚
â”‚  â”‚  header to      â”‚                                            â”‚
â”‚  â”‚  request        â”‚                                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚           â”‚                                                      â”‚
â”‚           â–¼                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚  â”‚  Send request   â”‚                                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚           â”‚                                                      â”‚
â”‚           â–¼                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚  â”‚  BACKEND        â”‚                                            â”‚
â”‚  â”‚  (requireUser   â”‚                                            â”‚
â”‚  â”‚   middleware)   â”‚                                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚           â”‚                                                      â”‚
â”‚           â–¼                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚  â”‚  Validate       â”‚                                            â”‚
â”‚  â”‚  x-userid       â”‚                                            â”‚
â”‚  â”‚  from header    â”‚                                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚           â”‚                                                      â”‚
â”‚      â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”                                                â”‚
â”‚      â”‚ Valid?  â”‚                                                â”‚
â”‚      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                                â”‚
â”‚           â”‚                                                      â”‚
â”‚      YES  â”‚  NO                                                 â”‚
â”‚      â”‚    â”‚                                                      â”‚
â”‚      â”‚    â””â”€â”€â”€â”€â”€â”€> 401 Unauthorized                            â”‚
â”‚      â”‚             â†“                                            â”‚
â”‚      â”‚          Frontend redirects to login                    â”‚
â”‚      â”‚                                                          â”‚
â”‚      â–¼                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚  â”‚  Attach user    â”‚                                            â”‚
â”‚  â”‚  info to        â”‚                                            â”‚
â”‚  â”‚  req.user       â”‚                                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚           â”‚                                                      â”‚
â”‚           â–¼                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚  â”‚  Proceed to     â”‚                                            â”‚
â”‚  â”‚  controller     â”‚                                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Patient Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PATIENT WORKFLOW                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   Patient    â”‚
                        â”‚   Logs In    â”‚
                        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚  Patient Dashboard    â”‚
                   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                   â”‚  â”‚ Fraud Status    â”‚  â”‚
                   â”‚  â”‚ Banner Display  â”‚  â”‚
                   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚              â”‚              â”‚
            â–¼              â–¼              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Claims   â”‚  â”‚  Medical  â”‚  â”‚ Documents â”‚
    â”‚           â”‚  â”‚  Records  â”‚  â”‚           â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
          â”‚              â”‚              â”‚
          â”‚              â”‚              â””â”€â”€â”€â”€â”
          â”‚              â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SUBMIT NEW CLAIM  â”‚    â”‚          â”‚ UPLOAD DOCUMENT â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. Fill form:     â”‚    â”‚          â”‚ 1. Choose file  â”‚
â”‚    - Doctor ID    â”‚    â”‚          â”‚ 2. Select       â”‚
â”‚    - Policy ID    â”‚    â”‚          â”‚    category     â”‚
â”‚    - Hospital ID  â”‚    â”‚          â”‚ 3. Add          â”‚
â”‚    - Amount       â”‚    â”‚          â”‚    description  â”‚
â”‚    - Type         â”‚    â”‚          â”‚ 4. Upload       â”‚
â”‚    - Description  â”‚    â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ 2. Attach docs    â”‚    â”‚                   â”‚
â”‚ 3. Submit         â”‚    â”‚                   â–¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚          POST /documents/upload
          â”‚              â”‚                   â”‚
          â–¼              â”‚                   â–¼
POST /patient/claim      â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      /submit            â”‚          â”‚  BACKEND:      â”‚
          â”‚              â”‚          â”‚  1. Validate   â”‚
          â–¼              â”‚          â”‚  2. Save file  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚          â”‚  3. Create     â”‚
â”‚  FRAUD DETECTION    â”‚  â”‚          â”‚     MongoDB    â”‚
â”‚  (Automatic)        â”‚  â”‚          â”‚     record     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚          â”‚  4. Return     â”‚
â”‚ 1. Check if blocked â”‚  â”‚          â”‚     documentId â”‚
â”‚ 2. Load documents   â”‚  â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ 3. Run OCR          â”‚  â”‚                   â”‚
â”‚ 4. Analyze patterns â”‚  â”‚                   â–¼
â”‚ 5. Calculate score  â”‚  â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. Cross-verify     â”‚  â”‚          â”‚  Document      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚          â”‚  saved with    â”‚
          â”‚              â”‚          â”‚  unique ID     â”‚
      â”Œâ”€â”€â”€â”´â”€â”€â”€â”          â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚Score? â”‚          â”‚
      â””â”€â”€â”€â”¬â”€â”€â”€â”˜          â”‚
          â”‚              â”‚
    < 50  â”‚  >= 50       â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    (OK)  â”‚  (FRAUD)     â”‚          â”‚ VIEW RECORDS   â”‚
      â”‚   â”‚              â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚          â”‚ GET /patient/  â”‚
      â”‚              â”‚   â”‚          â”‚ :id/records    â”‚
      â–¼              â–¼   â”‚          â”‚                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ Displays:      â”‚
â”‚Submit to  â”‚  â”‚ REJECT CLAIM â”‚    â”‚ - Diagnosis    â”‚
â”‚Blockchain â”‚  â”‚              â”‚    â”‚ - Treatment    â”‚
â”‚           â”‚  â”‚ 1. Record    â”‚    â”‚ - Medications  â”‚
â”‚Invoke:    â”‚  â”‚    fraud     â”‚    â”‚ - Doctor info  â”‚
â”‚submitClaimâ”‚  â”‚    attempt   â”‚    â”‚ - Date         â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â”‚ 2. Increment â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚        â”‚    counter   â”‚
      â”‚        â”‚ 3. Add       â”‚
      â–¼        â”‚    warning   â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ 4. Check if  â”‚    â”‚ ACCESS CONTROL â”‚
â”‚ Claim     â”‚  â”‚    3rd       â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ stored on â”‚  â”‚    attempt   â”‚    â”‚ GRANT ACCESS:  â”‚
â”‚ ledger    â”‚  â”‚ 5. Block if  â”‚    â”‚ POST /patient/ â”‚
â”‚ (immut-   â”‚  â”‚    count=3   â”‚    â”‚ grantAccess    â”‚
â”‚  able)    â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜         â”‚            â”‚ REVOKE ACCESS: â”‚
      â”‚               â–¼            â”‚ POST /patient/ â”‚
      â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ revokeAccess   â”‚
      â”‚        â”‚ Return error â”‚    â”‚                â”‚
      â”‚        â”‚ to patient:  â”‚    â”‚ Blockchain     â”‚
      â”‚        â”‚              â”‚    â”‚ transaction    â”‚
      â”‚        â”‚ - Fraud      â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚        â”‚   detected   â”‚
      â”‚        â”‚ - Attempt    â”‚
      â”‚        â”‚   count      â”‚
      â”‚        â”‚ - Remaining  â”‚
      â”‚        â”‚   attempts   â”‚
      â”‚        â”‚ - Details    â”‚
      â”‚        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚               â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                       â”‚
                                       â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚  Dashboard     â”‚
                              â”‚  Updates:      â”‚
                              â”‚                â”‚
                              â”‚  - Fraud       â”‚
                              â”‚    banner      â”‚
                              â”‚  - Claims list â”‚
                              â”‚  - Toast       â”‚
                              â”‚    notificationâ”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Doctor Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       DOCTOR WORKFLOW                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚    Doctor    â”‚
                        â”‚   Logs In    â”‚
                        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚   Doctor Dashboard    â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚              â”‚              â”‚
            â–¼              â–¼              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Patients  â”‚  â”‚  Medical  â”‚  â”‚  Claims   â”‚
    â”‚   List    â”‚  â”‚  Records  â”‚  â”‚  Verify   â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
          â”‚              â”‚              â”‚
          â”‚              â”‚              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VIEW PATIENTS     â”‚    â”‚      â”‚ VERIFY CLAIM   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ GET /doctor/      â”‚    â”‚      â”‚ 1. View claim  â”‚
â”‚ :id/patients      â”‚    â”‚      â”‚    details     â”‚
â”‚                   â”‚    â”‚      â”‚ 2. Review      â”‚
â”‚ Shows:            â”‚    â”‚      â”‚    medical     â”‚
â”‚ - Patient list    â”‚    â”‚      â”‚    records     â”‚
â”‚ - Access status   â”‚    â”‚      â”‚ 3. Check       â”‚
â”‚ - Last visit      â”‚    â”‚      â”‚    documents   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚      â”‚ 4. Add notes   â”‚
                         â”‚      â”‚ 5. Submit      â”‚
                         â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚               â”‚
                         â”‚               â–¼
                         â”‚      POST /doctor/claim
                         â”‚            /verify
                         â”‚               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚               â–¼
â”‚ ADD MEDICAL RECORD â”‚   â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚      â”‚  BACKEND:      â”‚
â”‚ 1. Select patient  â”‚   â”‚      â”‚  1. Validate   â”‚
â”‚ 2. Fill form:      â”‚   â”‚      â”‚     doctor     â”‚
â”‚    - Diagnosis     â”‚   â”‚      â”‚     authority  â”‚
â”‚    - Treatment     â”‚   â”‚      â”‚  2. Update     â”‚
â”‚    - Medications   â”‚   â”‚      â”‚     claim on   â”‚
â”‚    - Notes         â”‚   â”‚      â”‚     blockchain â”‚
â”‚    - Record type   â”‚   â”‚      â”‚  3. Set status â”‚
â”‚ 3. Submit          â”‚   â”‚      â”‚     to         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚      â”‚     "verified" â”‚
           â”‚             â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â–¼             â”‚               â”‚
POST /doctor/addRecord   â”‚               â–¼
           â”‚             â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â–¼             â”‚      â”‚  Claim updated â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚      â”‚  Insurance     â”‚
  â”‚  BACKEND:      â”‚     â”‚      â”‚  can now       â”‚
  â”‚  1. Check      â”‚     â”‚      â”‚  review        â”‚
  â”‚     access     â”‚     â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚     granted    â”‚     â”‚
  â”‚  2. Validate   â”‚     â”‚
  â”‚     data       â”‚     â”‚
  â”‚  3. Submit to  â”‚     â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚     blockchain â”‚     â”‚      â”‚ VIEW PATIENT   â”‚
  â”‚  4. Store on   â”‚     â”‚      â”‚ RECORDS        â”‚
  â”‚     ledger     â”‚     â”‚      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚      â”‚ GET /doctor/   â”‚
           â”‚             â”‚      â”‚ records/       â”‚
           â–¼             â”‚      â”‚ :patientId     â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚      â”‚                â”‚
  â”‚  Record saved  â”‚     â”‚      â”‚ Requires:      â”‚
  â”‚  on blockchain â”‚     â”‚      â”‚ - Patient      â”‚
  â”‚  (immutable)   â”‚     â”‚      â”‚   granted      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚      â”‚   access       â”‚
           â”‚             â”‚      â”‚                â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€> Displays:   â”‚
                                â”‚ - All records  â”‚
                                â”‚ - Diagnosis    â”‚
                                â”‚ - Treatment    â”‚
                                â”‚ - History      â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DOCTOR ACCESS CONTROL                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Can only access patient records if:                     â”‚   â”‚
â”‚  â”‚  1. Patient has granted access (blockchain record)       â”‚   â”‚
â”‚  â”‚  2. Doctor is assigned to hospital                       â”‚   â”‚
â”‚  â”‚  3. Valid doctor credentials                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  All actions recorded on blockchain:                     â”‚   â”‚
â”‚  â”‚  - Medical record creation                               â”‚   â”‚
â”‚  â”‚  - Claim verification                                    â”‚   â”‚
â”‚  â”‚  - Patient record access                                 â”‚   â”‚
â”‚  â”‚  - Timestamps and audit trail                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Insurance Agent Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  INSURANCE AGENT WORKFLOW                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  Insurance   â”‚
                        â”‚    Agent     â”‚
                        â”‚   Logs In    â”‚
                        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ Insurance Dashboard   â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ VIEW PENDING   â”‚
                  â”‚    CLAIMS      â”‚
                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                  â”‚ GET /claims/   â”‚
                  â”‚ byStatus?      â”‚
                  â”‚ status=pending â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  Claims List   â”‚
                  â”‚  Shows:        â”‚
                  â”‚  - Patient     â”‚
                  â”‚  - Amount      â”‚
                  â”‚  - Type        â”‚
                  â”‚  - Date        â”‚
                  â”‚  - Status      â”‚
                  â”‚  - Doctor      â”‚
                  â”‚    verified?   â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
                    â”‚ Select Claimâ”‚
                    â”‚ to Review   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   REVIEW CLAIM         â”‚
              â”‚   (Detail View)        â”‚
              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
              â”‚ GET /insurance/claim/  â”‚
              â”‚ :claimId               â”‚
              â”‚                        â”‚
              â”‚ Displays:              â”‚
              â”‚ 1. Claim details       â”‚
              â”‚ 2. Patient info        â”‚
              â”‚ 3. Doctor verification â”‚
              â”‚ 4. Medical records     â”‚
              â”‚ 5. Attached documents  â”‚
              â”‚ 6. Fraud score (if any)â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ GET MEDICAL RECORDS    â”‚
              â”‚                        â”‚
              â”‚ GET /insurance/claim/  â”‚
              â”‚ :claimId/records       â”‚
              â”‚                        â”‚
              â”‚ Reviews:               â”‚
              â”‚ - Diagnosis            â”‚
              â”‚ - Treatment history    â”‚
              â”‚ - Medications          â”‚
              â”‚ - Doctor notes         â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  DECISION REQUIRED     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                     â”‚
      APPROVE                 REJECT
            â”‚                     â”‚
            â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ APPROVE CLAIM     â”‚    â”‚  REJECT CLAIM     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ POST /insurance/  â”‚    â”‚ POST /insurance/  â”‚
â”‚ claim/approve     â”‚    â”‚ claim/reject      â”‚
â”‚                   â”‚    â”‚                   â”‚
â”‚ Payload:          â”‚    â”‚ Payload:          â”‚
â”‚ - claimId         â”‚    â”‚ - claimId         â”‚
â”‚ - amountApproved  â”‚    â”‚ - rejectionReason â”‚
â”‚ - approvalNotes   â”‚    â”‚ - notes           â”‚
â”‚ - agentId         â”‚    â”‚ - agentId         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                        â”‚
          â–¼                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BACKEND:         â”‚    â”‚  BACKEND:         â”‚
â”‚  1. Validate      â”‚    â”‚  1. Validate      â”‚
â”‚     authority     â”‚    â”‚     authority     â”‚
â”‚  2. Check fraud   â”‚    â”‚  2. Record reason â”‚
â”‚     status        â”‚    â”‚  3. Update claim  â”‚
â”‚  3. Update claim  â”‚    â”‚     on blockchain â”‚
â”‚     on blockchain â”‚    â”‚  4. Set status    â”‚
â”‚  4. Set status    â”‚    â”‚     "rejected"    â”‚
â”‚     "approved"    â”‚    â”‚  5. Notify        â”‚
â”‚  5. Process       â”‚    â”‚     patient       â”‚
â”‚     payment (if   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚     integrated)   â”‚              â”‚
â”‚  6. Notify        â”‚              â”‚
â”‚     patient       â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
          â”‚                        â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Claim Updated on  â”‚
              â”‚  Blockchain        â”‚
              â”‚  (Immutable Record)â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Dashboard Updates â”‚
              â”‚  - Claim list      â”‚
              â”‚  - Statistics      â”‚
              â”‚  - Toast           â”‚
              â”‚    notification    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              INSURANCE AGENT ACCESS & PERMISSIONS                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  Can access:                                                      â”‚
â”‚  âœ“ All pending claims                                            â”‚
â”‚  âœ“ Claims assigned to their insurance company                    â”‚
â”‚  âœ“ Patient medical records (for claim review)                    â”‚
â”‚  âœ“ Doctor verification status                                    â”‚
â”‚  âœ“ Fraud detection reports                                       â”‚
â”‚                                                                   â”‚
â”‚  Cannot access:                                                   â”‚
â”‚  âœ— Unrelated patient records                                     â”‚
â”‚  âœ— Claims from other insurance companies                         â”‚
â”‚  âœ— Admin functions                                               â”‚
â”‚                                                                   â”‚
â”‚  All actions logged on blockchain                                â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. Admin Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ADMIN WORKFLOW                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚    Admin     â”‚
                        â”‚   Logs In    â”‚
                        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚   Admin Dashboard     â”‚
                   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                   â”‚   â”‚ Main Tabs:    â”‚   â”‚
                   â”‚   â”‚ - Requests    â”‚   â”‚
                   â”‚   â”‚ - Direct Reg  â”‚   â”‚
                   â”‚   â”‚ - Fraud Mgmt  â”‚   â”‚
                   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚              â”‚              â”‚
            â–¼              â–¼              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚Registrationâ”‚ â”‚  Direct   â”‚  â”‚   Fraud   â”‚
    â”‚ Requests  â”‚  â”‚Registrationâ”‚ â”‚ Managementâ”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
          â”‚              â”‚              â”‚
          â”‚              â”‚              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MANAGE REQUESTS      â”‚ â”‚      â”‚ FRAUD MANAGEMENT   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ View pending:        â”‚ â”‚      â”‚ 3 Tabs:            â”‚
â”‚ - Doctors            â”‚ â”‚      â”‚ 1. Statistics      â”‚
â”‚ - Insurance agents   â”‚ â”‚      â”‚ 2. Blocked Users   â”‚
â”‚                      â”‚ â”‚      â”‚ 3. Fraudulent Usersâ”‚
â”‚ For each request:    â”‚ â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                      â”‚ â”‚               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚               â”‚
â”‚ â”‚ APPROVE        â”‚  â”‚ â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚                â”‚  â”‚ â”‚      â”‚ STATISTICS TAB     â”‚
â”‚ â”‚ POST /auth/    â”‚  â”‚ â”‚      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”‚ complete[Role] â”‚  â”‚ â”‚      â”‚ GET /fraud/        â”‚
â”‚ â”‚ Registration   â”‚  â”‚ â”‚      â”‚ statistics         â”‚
â”‚ â”‚                â”‚  â”‚ â”‚      â”‚                    â”‚
â”‚ â”‚ 1. Create      â”‚  â”‚ â”‚      â”‚ Shows:             â”‚
â”‚ â”‚    wallet      â”‚  â”‚ â”‚      â”‚ - Total users      â”‚
â”‚ â”‚ 2. Register on â”‚  â”‚ â”‚      â”‚ - Fraud attempts   â”‚
â”‚ â”‚    blockchain  â”‚  â”‚ â”‚      â”‚ - Blocked users    â”‚
â”‚ â”‚ 3. Update user â”‚  â”‚ â”‚      â”‚ - Recent warnings  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚      â”‚ - Fraud rates      â”‚
â”‚                      â”‚ â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚ â”‚ REJECT         â”‚  â”‚ â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚                â”‚  â”‚ â”‚      â”‚ BLOCKED USERS TAB  â”‚
â”‚ â”‚ 1. Delete from â”‚  â”‚ â”‚      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”‚    MongoDB     â”‚  â”‚ â”‚      â”‚ GET /fraud/users/  â”‚
â”‚ â”‚ 2. Notify user â”‚  â”‚ â”‚      â”‚ blocked            â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚      â”‚                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚ For each user:     â”‚
                         â”‚      â”‚                    â”‚
                         â”‚      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚ â”‚ VIEW WARNINGS  â”‚ â”‚
â”‚ DIRECT REGISTRATION    â”‚      â”‚ â”‚                â”‚ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚ â”‚ GET /fraud/    â”‚ â”‚
â”‚ REGISTER DOCTOR:       â”‚      â”‚ â”‚ warnings/      â”‚ â”‚
â”‚                        â”‚      â”‚ â”‚ :userId        â”‚ â”‚
â”‚ POST /auth/            â”‚      â”‚ â”‚                â”‚ â”‚
â”‚ registerDoctor         â”‚      â”‚ â”‚ Shows:         â”‚ â”‚
â”‚                        â”‚      â”‚ â”‚ - All warnings â”‚ â”‚
â”‚ Payload:               â”‚      â”‚ â”‚ - Fraud scores â”‚ â”‚
â”‚ - adminId              â”‚      â”‚ â”‚ - Claim IDs    â”‚ â”‚
â”‚ - doctorId             â”‚      â”‚ â”‚ - Dates        â”‚ â”‚
â”‚ - hospitalId           â”‚      â”‚ â”‚ - Details      â”‚ â”‚
â”‚ - name                 â”‚      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ - email                â”‚      â”‚                    â”‚
â”‚ - password             â”‚      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ - city                 â”‚      â”‚ â”‚ UNBLOCK USER   â”‚ â”‚
â”‚                        â”‚      â”‚ â”‚                â”‚ â”‚
â”‚ Auto-creates:          â”‚      â”‚ â”‚ POST /fraud/   â”‚ â”‚
â”‚ 1. MongoDB record      â”‚      â”‚ â”‚ users/unblock/ â”‚ â”‚
â”‚ 2. Wallet identity     â”‚      â”‚ â”‚ :userId        â”‚ â”‚
â”‚ 3. Blockchain reg      â”‚      â”‚ â”‚                â”‚ â”‚
â”‚                        â”‚      â”‚ â”‚ 1. Update user â”‚ â”‚
â”‚ REGISTER AGENT:        â”‚      â”‚ â”‚ 2. Reset count â”‚ â”‚
â”‚                        â”‚      â”‚ â”‚ 3. Log action  â”‚ â”‚
â”‚ POST /auth/            â”‚      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ registerInsurance      â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ Agent                  â”‚
â”‚                        â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Payload:               â”‚      â”‚ FRAUDULENT USERS   â”‚
â”‚ - adminId              â”‚      â”‚ TAB                â”‚
â”‚ - agentId              â”‚      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - insuranceId          â”‚      â”‚ GET /fraud/users/  â”‚
â”‚ - name                 â”‚      â”‚ fraudulent         â”‚
â”‚ - email                â”‚      â”‚                    â”‚
â”‚ - password             â”‚      â”‚ Lists all users    â”‚
â”‚ - city                 â”‚      â”‚ with fraud         â”‚
â”‚                        â”‚      â”‚ attempts (>0)      â”‚
â”‚ Auto-creates:          â”‚      â”‚                    â”‚
â”‚ 1. MongoDB record      â”‚      â”‚ Color-coded:       â”‚
â”‚ 2. Wallet identity     â”‚      â”‚ - Red: blocked     â”‚
â”‚ 3. Blockchain reg      â”‚      â”‚ - Yellow: warned   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚                    â”‚
                                â”‚ Shows:             â”‚
                                â”‚ - Attempt count    â”‚
                                â”‚ - Warning count    â”‚
                                â”‚ - Last warning     â”‚
                                â”‚ - Status           â”‚
                                â”‚                    â”‚
                                â”‚ Actions:           â”‚
                                â”‚ - View details     â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ADMIN PRIVILEGES                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  Full Access:                                                     â”‚
â”‚  âœ“ Approve/reject registrations                                  â”‚
â”‚  âœ“ Direct user registration (bypass approval)                    â”‚
â”‚  âœ“ View all fraud statistics                                     â”‚
â”‚  âœ“ View all blocked users                                        â”‚
â”‚  âœ“ Unblock users                                                 â”‚
â”‚  âœ“ View detailed warning history                                 â”‚
â”‚  âœ“ Access all system metrics                                     â”‚
â”‚  âœ“ Monitor blockchain transactions                               â”‚
â”‚                                                                   â”‚
â”‚  Security:                                                        â”‚
â”‚  - All admin actions logged                                      â”‚
â”‚  - Blockchain audit trail                                        â”‚
â”‚  - MongoDB timestamps                                            â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. Fraud Detection Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              AI-POWERED FRAUD DETECTION FLOW                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚ Patient Submits â”‚
                     â”‚ Claim with      â”‚
                     â”‚ Documents       â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚ POST /patient/  â”‚
                     â”‚ claim/submit    â”‚
                     â”‚                 â”‚
                     â”‚ Payload:        â”‚
                     â”‚ - Claim data    â”‚
                     â”‚ - documentIds[] â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ BACKEND CONTROLLER    â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ STEP 1: CHECK IF USER BLOCKED   â”‚
            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
            â”‚ fraudDetectionService.          â”‚
            â”‚ isUserBlocked(userId)           â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
                â”‚ Blocked?  â”‚
                â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                      â”‚
                YES   â”‚   NO
                 â”‚    â”‚
                 â”‚    â–¼
                 â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚ â”‚ STEP 2: GET FRAUD       â”‚
                 â”‚ â”‚ STATUS                  â”‚
                 â”‚ â”‚                         â”‚
                 â”‚ â”‚ fraudDetectionService.  â”‚
                 â”‚ â”‚ getUserFraudStatus()    â”‚
                 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚             â”‚
                 â”‚             â–¼
                 â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚ â”‚ STEP 3: GET DOCUMENT    â”‚
                 â”‚ â”‚ PATHS                   â”‚
                 â”‚ â”‚                         â”‚
                 â”‚ â”‚ Query MongoDB User      â”‚
                 â”‚ â”‚ model for documents     â”‚
                 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚             â”‚
                 â”‚        â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                 â”‚        â”‚ Docs?   â”‚
                 â”‚        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                 â”‚             â”‚
                 â”‚        YES  â”‚  NO
                 â”‚        â”‚    â”‚
                 â”‚        â”‚    â””â”€â”€â”€â”€> Skip fraud detection
                 â”‚        â”‚           Submit directly
                 â”‚        â”‚
                 â”‚        â–¼
                 â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚ â”‚ STEP 4: RUN FRAUD DETECTION     â”‚
                 â”‚ â”‚                                 â”‚
                 â”‚ â”‚ fraudDetectionService.          â”‚
                 â”‚ â”‚ verifyClaimDocuments()          â”‚
                 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚             â”‚
                 â”‚             â–¼
                 â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚ â”‚ FOR EACH DOCUMENT:              â”‚
                 â”‚ â”‚                                 â”‚
                 â”‚ â”‚ A. VALIDATE FILE               â”‚
                 â”‚ â”‚    - Check file exists          â”‚
                 â”‚ â”‚    - Check file size            â”‚
                 â”‚ â”‚    - Check file format          â”‚
                 â”‚ â”‚                                 â”‚
                 â”‚ â”‚ B. PERFORM OCR                 â”‚
                 â”‚ â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
                 â”‚ â”‚    â”‚ Tesseract.js         â”‚    â”‚
                 â”‚ â”‚    â”‚ .recognize()         â”‚    â”‚
                 â”‚ â”‚    â”‚                      â”‚    â”‚
                 â”‚ â”‚    â”‚ - Extract text       â”‚    â”‚
                 â”‚ â”‚    â”‚ - Get confidence     â”‚    â”‚
                 â”‚ â”‚    â”‚   score (0-100%)     â”‚    â”‚
                 â”‚ â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                 â”‚ â”‚               â”‚                 â”‚
                 â”‚ â”‚               â–¼                 â”‚
                 â”‚ â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
                 â”‚ â”‚    â”‚ OCR Result:          â”‚    â”‚
                 â”‚ â”‚    â”‚ - text: string       â”‚    â”‚
                 â”‚ â”‚    â”‚ - confidence: number â”‚    â”‚
                 â”‚ â”‚    â”‚ - success: boolean   â”‚    â”‚
                 â”‚ â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                 â”‚ â”‚               â”‚                 â”‚
                 â”‚ â”‚               â–¼                 â”‚
                 â”‚ â”‚ C. ANALYZE TEXT                â”‚
                 â”‚ â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
                 â”‚ â”‚    â”‚ Pattern Detection:   â”‚    â”‚
                 â”‚ â”‚    â”‚                      â”‚    â”‚
                 â”‚ â”‚    â”‚ 1. Fraud Keywords   â”‚    â”‚
                 â”‚ â”‚    â”‚    (fake, forged,   â”‚    â”‚
                 â”‚ â”‚    â”‚     counterfeit,    â”‚    â”‚
                 â”‚ â”‚    â”‚     duplicate)      â”‚    â”‚
                 â”‚ â”‚    â”‚    Score: +25 pts   â”‚    â”‚
                 â”‚ â”‚    â”‚                      â”‚    â”‚
                 â”‚ â”‚    â”‚ 2. Medical Terms    â”‚    â”‚
                 â”‚ â”‚    â”‚    (diagnosis,      â”‚    â”‚
                 â”‚ â”‚    â”‚     treatment,      â”‚    â”‚
                 â”‚ â”‚    â”‚     prescription)   â”‚    â”‚
                 â”‚ â”‚    â”‚    < 2 terms:       â”‚    â”‚
                 â”‚ â”‚    â”‚    Score: +15 pts   â”‚    â”‚
                 â”‚ â”‚    â”‚                      â”‚    â”‚
                 â”‚ â”‚    â”‚ 3. Suspicious       â”‚    â”‚
                 â”‚ â”‚    â”‚    Language         â”‚    â”‚
                 â”‚ â”‚    â”‚    (urgent, rush,   â”‚    â”‚
                 â”‚ â”‚    â”‚     maximum)        â”‚    â”‚
                 â”‚ â”‚    â”‚    Score: +20 pts   â”‚    â”‚
                 â”‚ â”‚    â”‚                      â”‚    â”‚
                 â”‚ â”‚    â”‚ 4. Content Length   â”‚    â”‚
                 â”‚ â”‚    â”‚    < 100 chars:     â”‚    â”‚
                 â”‚ â”‚    â”‚    Score: +10 pts   â”‚    â”‚
                 â”‚ â”‚    â”‚                      â”‚    â”‚
                 â”‚ â”‚    â”‚ 5. Required Fields  â”‚    â”‚
                 â”‚ â”‚    â”‚    Missing patient  â”‚    â”‚
                 â”‚ â”‚    â”‚    name, date, or   â”‚    â”‚
                 â”‚ â”‚    â”‚    signature:       â”‚    â”‚
                 â”‚ â”‚    â”‚    Score: +15 pts   â”‚    â”‚
                 â”‚ â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                 â”‚ â”‚               â”‚                 â”‚
                 â”‚ â”‚               â–¼                 â”‚
                 â”‚ â”‚ D. ANALYZE IMAGE QUALITY       â”‚
                 â”‚ â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
                 â”‚ â”‚    â”‚ Quality Checks:      â”‚    â”‚
                 â”‚ â”‚    â”‚                      â”‚    â”‚
                 â”‚ â”‚    â”‚ 1. File Size         â”‚    â”‚
                 â”‚ â”‚    â”‚    < 50KB:           â”‚    â”‚
                 â”‚ â”‚    â”‚    Score: +20 pts    â”‚    â”‚
                 â”‚ â”‚    â”‚                      â”‚    â”‚
                 â”‚ â”‚    â”‚ 2. File Format       â”‚    â”‚
                 â”‚ â”‚    â”‚    Unusual format:   â”‚    â”‚
                 â”‚ â”‚    â”‚    Score: +15 pts    â”‚    â”‚
                 â”‚ â”‚    â”‚                      â”‚    â”‚
                 â”‚ â”‚    â”‚ 3. Metadata          â”‚    â”‚
                 â”‚ â”‚    â”‚    (Future: EXIF     â”‚    â”‚
                 â”‚ â”‚    â”‚     analysis)        â”‚    â”‚
                 â”‚ â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                 â”‚ â”‚               â”‚                 â”‚
                 â”‚ â”‚               â–¼                 â”‚
                 â”‚ â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
                 â”‚ â”‚    â”‚ Document Fraud Score â”‚    â”‚
                 â”‚ â”‚    â”‚ (Sum of all points)  â”‚    â”‚
                 â”‚ â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                 â”‚ â”‚               â”‚                 â”‚
                 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                 â”‚
                 â”‚                 â–¼
                 â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚ â”‚ STEP 5: CROSS-VERIFICATION      â”‚
                 â”‚ â”‚                                 â”‚
                 â”‚ â”‚ Compare claim data with         â”‚
                 â”‚ â”‚ document content:               â”‚
                 â”‚ â”‚                                 â”‚
                 â”‚ â”‚ 1. Claim Amount Match?         â”‚
                 â”‚ â”‚    Not found in docs:           â”‚
                 â”‚ â”‚    Score: +15 pts               â”‚
                 â”‚ â”‚                                 â”‚
                 â”‚ â”‚ 2. Description Match?          â”‚
                 â”‚ â”‚    < 2 matching words:          â”‚
                 â”‚ â”‚    Score: +10 pts               â”‚
                 â”‚ â”‚                                 â”‚
                 â”‚ â”‚ 3. Claim Type Valid?           â”‚
                 â”‚ â”‚    Not in valid list:           â”‚
                 â”‚ â”‚    Score: +10 pts               â”‚
                 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚             â”‚
                 â”‚             â–¼
                 â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚ â”‚ STEP 6: CALCULATE OVERALL       â”‚
                 â”‚ â”‚ FRAUD SCORE                     â”‚
                 â”‚ â”‚                                 â”‚
                 â”‚ â”‚ Average all document scores     â”‚
                 â”‚ â”‚ + Cross-verification score      â”‚
                 â”‚ â”‚                                 â”‚
                 â”‚ â”‚ Total Score: 0-100              â”‚
                 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚             â”‚
                 â”‚             â–¼
                 â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚        â”‚ Score >= 50?â”‚
                 â”‚        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚             â”‚
                 â”‚        â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                 â”‚        â”‚         â”‚
                 â”‚      YES        NO
                 â”‚    (FRAUD)    (LEGIT)
                 â”‚        â”‚         â”‚
                 â”‚        â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚        â”‚                    â”‚
                 â”‚        â–¼                    â”‚
                 â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                 â”‚ â”‚ STEP 7: RECORD      â”‚   â”‚
                 â”‚ â”‚ FRAUD ATTEMPT       â”‚   â”‚
                 â”‚ â”‚                     â”‚   â”‚
                 â”‚ â”‚ fraudDetectionServiceâ”‚  â”‚
                 â”‚ â”‚ .recordFraudAttempt()â”‚  â”‚
                 â”‚ â”‚                     â”‚   â”‚
                 â”‚ â”‚ 1. Find user in     â”‚   â”‚
                 â”‚ â”‚    MongoDB          â”‚   â”‚
                 â”‚ â”‚ 2. Increment        â”‚   â”‚
                 â”‚ â”‚    attemptCount     â”‚   â”‚
                 â”‚ â”‚ 3. Add warning:     â”‚   â”‚
                 â”‚ â”‚    - claimId        â”‚   â”‚
                 â”‚ â”‚    - reason         â”‚   â”‚
                 â”‚ â”‚    - fraudScore     â”‚   â”‚
                 â”‚ â”‚    - timestamp      â”‚   â”‚
                 â”‚ â”‚    - details (JSON) â”‚   â”‚
                 â”‚ â”‚ 4. Update           â”‚   â”‚
                 â”‚ â”‚    lastWarningAt    â”‚   â”‚
                 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                 â”‚            â”‚               â”‚
                 â”‚            â–¼               â”‚
                 â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                 â”‚ â”‚ CHECK ATTEMPT COUNT  â”‚   â”‚
                 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                 â”‚            â”‚               â”‚
                 â”‚       â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”          â”‚
                 â”‚       â”‚ Count?  â”‚          â”‚
                 â”‚       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜          â”‚
                 â”‚            â”‚               â”‚
                 â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”       â”‚
                 â”‚    â”‚       â”‚       â”‚       â”‚
                 â”‚   1-2      3      3+       â”‚
                 â”‚    â”‚       â”‚       â”‚       â”‚
                 â”‚    â”‚       â–¼       â”‚       â”‚
                 â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚       â”‚
                 â”‚    â”‚ â”‚ BLOCK    â”‚ â”‚       â”‚
                 â”‚    â”‚ â”‚ USER     â”‚ â”‚       â”‚
                 â”‚    â”‚ â”‚          â”‚ â”‚       â”‚
                 â”‚    â”‚ â”‚ Set:     â”‚ â”‚       â”‚
                 â”‚    â”‚ â”‚ isBlockedâ”‚ â”‚       â”‚
                 â”‚    â”‚ â”‚ = true   â”‚ â”‚       â”‚
                 â”‚    â”‚ â”‚          â”‚ â”‚       â”‚
                 â”‚    â”‚ â”‚ blockedAtâ”‚ â”‚       â”‚
                 â”‚    â”‚ â”‚ = now    â”‚ â”‚       â”‚
                 â”‚    â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â”‚       â”‚
                 â”‚    â”‚      â”‚       â”‚       â”‚
                 â”‚    â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
                 â”‚            â”‚               â”‚
                 â”‚            â–¼               â”‚
                 â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                 â”‚ â”‚ RETURN FRAUD ERROR   â”‚   â”‚
                 â”‚ â”‚                      â”‚   â”‚
                 â”‚ â”‚ {                    â”‚   â”‚
                 â”‚ â”‚   success: false,    â”‚   â”‚
                 â”‚ â”‚   fraudDetected:true,â”‚   â”‚
                 â”‚ â”‚   message: "WARNING: â”‚   â”‚
                 â”‚ â”‚   Attempt X of 3" or â”‚   â”‚
                 â”‚ â”‚   "BLOCKED",         â”‚   â”‚
                 â”‚ â”‚   details: {         â”‚   â”‚
                 â”‚ â”‚     fraudScore,      â”‚   â”‚
                 â”‚ â”‚     attemptCount,    â”‚   â”‚
                 â”‚ â”‚     remainingAttemptsâ”‚   â”‚
                 â”‚ â”‚     isBlocked,       â”‚   â”‚
                 â”‚ â”‚     recommendations  â”‚   â”‚
                 â”‚ â”‚   }                  â”‚   â”‚
                 â”‚ â”‚ }                    â”‚   â”‚
                 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                 â”‚            â”‚               â”‚
                 â–¼            â”‚               â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚               â”‚
       â”‚ Return 403       â”‚  â”‚               â”‚
       â”‚ Account Blocked  â”‚  â”‚               â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚               â”‚
                â”‚            â”‚               â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Frontend     â”‚
                    â”‚   Receives     â”‚
                    â”‚   Response     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                        â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                        â”‚         â”‚
                   FRAUD         SUCCESS
                        â”‚         â”‚
                        â”‚         â–¼
                        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ â”‚ Submit claim  â”‚
                        â”‚ â”‚ to blockchain â”‚
                        â”‚ â”‚               â”‚
                        â”‚ â”‚ invoke.invoke â”‚
                        â”‚ â”‚ Transaction(  â”‚
                        â”‚ â”‚ 'submitClaim',â”‚
                        â”‚ â”‚  payload,     â”‚
                        â”‚ â”‚  userId)      â”‚
                        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚         â”‚
                        â”‚         â–¼
                        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ â”‚ Claim stored  â”‚
                        â”‚ â”‚ on blockchain â”‚
                        â”‚ â”‚ (immutable)   â”‚
                        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚         â”‚
                        â”‚         â–¼
                        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ â”‚ Return successâ”‚
                        â”‚ â”‚ with          â”‚
                        â”‚ â”‚ verification  â”‚
                        â”‚ â”‚ info          â”‚
                        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚         â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚ Dashboard      â”‚
                         â”‚ Updates:       â”‚
                         â”‚                â”‚
                         â”‚ - Fraud banner â”‚
                         â”‚ - Claims list  â”‚
                         â”‚ - Toast        â”‚
                         â”‚   notification â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. AI Chatbot Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AI CHATBOT FLOW                                â”‚
â”‚              (Azure OpenAI + Fallback Mode)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚     User     â”‚
                        â”‚ Opens Chatbotâ”‚
                        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚  Frontend Component   â”‚
                   â”‚  Chatbot.jsx          â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ START CONVERSATION â”‚
                  â”‚                    â”‚
                  â”‚ POST /chatbot/startâ”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚ BACKEND CONTROLLER        â”‚
               â”‚                           â”‚
               â”‚ 1. Get user from MongoDB  â”‚
               â”‚ 2. Determine user role    â”‚
               â”‚ 3. Create conversation:   â”‚
               â”‚    - Generate sessionId   â”‚
               â”‚    - Set userRole         â”‚
               â”‚    - Record metadata      â”‚
               â”‚ 4. Generate welcome msg   â”‚
               â”‚ 5. Get role-specific      â”‚
               â”‚    suggestions            â”‚
               â”‚ 6. Save to MongoDB        â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚ RETURN TO FRONTEND:       â”‚
               â”‚ {                         â”‚
               â”‚   sessionId: "uuid",      â”‚
               â”‚   message: "Hello! I'm    â”‚
               â”‚   your assistant...",     â”‚
               â”‚   suggestions: [          â”‚
               â”‚     "How do I submit?",   â”‚
               â”‚     "What documents?",    â”‚
               â”‚     "Check claim status?"â”‚
               â”‚   ]                       â”‚
               â”‚ }                         â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ Display Welcome    â”‚
                  â”‚ + Suggestions      â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ User Types Message â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ SEND MESSAGE       â”‚
                  â”‚                    â”‚
                  â”‚ POST /chatbot/     â”‚
                  â”‚ message            â”‚
                  â”‚                    â”‚
                  â”‚ Payload:           â”‚
                  â”‚ - sessionId        â”‚
                  â”‚ - message          â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ BACKEND: chatbotController    â”‚
           â”‚                               â”‚
           â”‚ 1. Get conversation from DB   â”‚
           â”‚ 2. Add user message to historyâ”‚
           â”‚ 3. Get recent messages (10)   â”‚
           â”‚ 4. Analyze intent             â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ INTENT DETECTION              â”‚
           â”‚                               â”‚
           â”‚ Keywords â†’ Intent:            â”‚
           â”‚ "submit claim" â†’ claim_submit â”‚
           â”‚ "upload" â†’ document_upload    â”‚
           â”‚ "fraud" â†’ fraud_help          â”‚
           â”‚ "access" â†’ access_control     â”‚
           â”‚ "status" â†’ claim_status       â”‚
           â”‚ etc.                          â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ CHATBOT SERVICE               â”‚
           â”‚                               â”‚
           â”‚ chatbotService.chat(          â”‚
           â”‚   message,                    â”‚
           â”‚   history,                    â”‚
           â”‚   userRole                    â”‚
           â”‚ )                             â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                 â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
                 â”‚           â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”‚
          â”‚ Azure OpenAIâ”‚    â”‚
          â”‚ Available?  â”‚    â”‚
          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â”‚
                 â”‚           â”‚
            YES  â”‚  NO       â”‚
                 â”‚           â”‚
                 â–¼           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚        AI MODE                      â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ 1. Build messages array:           â”‚
    â”‚    - System prompt (role-aware)    â”‚
    â”‚    - Conversation history          â”‚
    â”‚    - Current user message          â”‚
    â”‚                                    â”‚
    â”‚ 2. System Prompt:                  â”‚
    â”‚    "You are an intelligent         â”‚
    â”‚     medical assistant for          â”‚
    â”‚     EHR CareCrypt..."              â”‚
    â”‚                                    â”‚
    â”‚    + Role-specific context:        â”‚
    â”‚    "The user is a PATIENT.         â”‚
    â”‚     They can: submit claims,       â”‚
    â”‚     upload documents..."           â”‚
    â”‚                                    â”‚
    â”‚ 3. Call Azure OpenAI:              â”‚
    â”‚    client.getChatCompletions(      â”‚
    â”‚      deploymentName,               â”‚
    â”‚      messages,                     â”‚
    â”‚      {                             â”‚
    â”‚        temperature: 0.7,           â”‚
    â”‚        maxTokens: 800,             â”‚
    â”‚        topP: 0.95                  â”‚
    â”‚      }                             â”‚
    â”‚    )                               â”‚
    â”‚                                    â”‚
    â”‚ 4. Extract response                â”‚
    â”‚ 5. Track token usage              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚      FALLBACK MODE                 â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ 1. Convert message to lowercase    â”‚
    â”‚                                    â”‚
    â”‚ 2. Match keywords:                 â”‚
    â”‚                                    â”‚
    â”‚    "claim" â†’                       â”‚
    â”‚    "To submit a claim:             â”‚
    â”‚     1. Go to Claims section        â”‚
    â”‚     2. Fill required details       â”‚
    â”‚     3. Upload documents            â”‚
    â”‚     4. Submit for review"          â”‚
    â”‚                                    â”‚
    â”‚    "upload" â†’                      â”‚
    â”‚    "To upload documents:           â”‚
    â”‚     1. Go to Documents             â”‚
    â”‚     2. Click Upload                â”‚
    â”‚     3. Select file (PDF, JPG)      â”‚
    â”‚     4. Choose category             â”‚
    â”‚     5. Add description"            â”‚
    â”‚                                    â”‚
    â”‚    "fraud" â†’                       â”‚
    â”‚    "If you received fraud warning: â”‚
    â”‚     1. Review issues               â”‚
    â”‚     2. Ensure docs are genuine     â”‚
    â”‚     3. Match amounts               â”‚
    â”‚     4. After 3 attempts = block"   â”‚
    â”‚                                    â”‚
    â”‚    No match â†’                      â”‚
    â”‚    "Hello! I can help with:        â”‚
    â”‚     â€¢ Submitting claims            â”‚
    â”‚     â€¢ Uploading documents          â”‚
    â”‚     â€¢ Understanding fraud          â”‚
    â”‚     What would you like to know?"  â”‚
    â”‚                                    â”‚
    â”‚ 3. Return pre-defined response     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚ Generate Contextual       â”‚
               â”‚ Suggestions               â”‚
               â”‚                           â”‚
               â”‚ Based on intent:          â”‚
               â”‚                           â”‚
               â”‚ claim_submission â†’        â”‚
               â”‚ ["What documents?",       â”‚
               â”‚  "How long?",             â”‚
               â”‚  "Can I edit?"]           â”‚
               â”‚                           â”‚
               â”‚ document_upload â†’         â”‚
               â”‚ ["File formats?",         â”‚
               â”‚  "Categorize how?",       â”‚
               â”‚  "Can I delete?"]         â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚ Save to MongoDB:          â”‚
               â”‚                           â”‚
               â”‚ - Add assistant message   â”‚
               â”‚ - Update conversation     â”‚
               â”‚ - Track tokens (AI mode)  â”‚
               â”‚ - Set fallback flag       â”‚
               â”‚ - Update timestamps       â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚ RETURN TO FRONTEND:       â”‚
               â”‚ {                         â”‚
               â”‚   success: true,          â”‚
               â”‚   message: "AI response", â”‚
               â”‚   timestamp: "...",       â”‚
               â”‚   intent: "claim_submit", â”‚
               â”‚   suggestions: [...],     â”‚
               â”‚   tokensUsed: {           â”‚
               â”‚     prompt: 150,          â”‚
               â”‚     completion: 200,      â”‚
               â”‚     total: 350            â”‚
               â”‚   }                       â”‚
               â”‚ }                         â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ Display Response   â”‚
                  â”‚ + New Suggestions  â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ User can:          â”‚
                  â”‚ - Click suggestion â”‚
                  â”‚ - Type new message â”‚
                  â”‚ - End conversation â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   CONVERSATION MANAGEMENT                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  MongoDB Storage:                                                 â”‚
â”‚  {                                                                â”‚
â”‚    userId: "P-abc123",                                           â”‚
â”‚    sessionId: "uuid",                                            â”‚
â”‚    userRole: "patient",                                          â”‚
â”‚    messages: [                                                    â”‚
â”‚      { role: "assistant", content: "Hello!", ... },             â”‚
â”‚      { role: "user", content: "How to submit?", ... },          â”‚
â”‚      { role: "assistant", content: "To submit...", ... }        â”‚
â”‚    ],                                                             â”‚
â”‚    active: true,                                                  â”‚
â”‚    metadata: {                                                    â”‚
â”‚      totalMessages: 5,                                           â”‚
â”‚      totalTokens: 1250,                                          â”‚
â”‚      startTime: "...",                                           â”‚
â”‚      userAgent: "..."                                            â”‚
â”‚    }                                                              â”‚
â”‚  }                                                                â”‚
â”‚                                                                   â”‚
â”‚  Auto-expires after 30 days                                      â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. Document Management Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   DOCUMENT MANAGEMENT FLOW                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚     User     â”‚
                        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚              â”‚              â”‚
                â–¼              â–¼              â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  UPLOAD  â”‚   â”‚   VIEW   â”‚   â”‚ DOWNLOAD â”‚
         â”‚          â”‚   â”‚          â”‚   â”‚          â”‚
         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
              â”‚              â”‚              â”‚
              â”‚              â”‚              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UPLOAD DOCUMENT          â”‚ â”‚      â”‚ DOWNLOAD DOC   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. User selects file     â”‚ â”‚      â”‚ GET /documents/â”‚
â”‚ 2. Choose category:      â”‚ â”‚      â”‚ download/      â”‚
â”‚    - medical_record      â”‚ â”‚      â”‚ :documentId    â”‚
â”‚    - prescription        â”‚ â”‚      â”‚                â”‚
â”‚    - lab_report          â”‚ â”‚      â”‚ Backend:       â”‚
â”‚    - scan                â”‚ â”‚      â”‚ 1. Validate    â”‚
â”‚    - insurance           â”‚ â”‚      â”‚    user owns   â”‚
â”‚    - other               â”‚ â”‚      â”‚    document    â”‚
â”‚ 3. Add description       â”‚ â”‚      â”‚ 2. Find file   â”‚
â”‚ 4. Click upload          â”‚ â”‚      â”‚    path        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚ 3. Stream file â”‚
           â”‚                 â”‚      â”‚    to user     â”‚
           â–¼                 â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
POST /documents/upload       â”‚
Content-Type:                â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
multipart/form-data          â”‚      â”‚ VIEW DOCUMENTS â”‚
           â”‚                 â”‚      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
           â–¼                 â”‚      â”‚ GET /documents/â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚ list           â”‚
â”‚  BACKEND: Multer         â”‚ â”‚      â”‚                â”‚
â”‚  Middleware              â”‚ â”‚      â”‚ Backend:       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚      â”‚ 1. Query user  â”‚
â”‚ 1. Configure storage:    â”‚ â”‚      â”‚    documents   â”‚
â”‚    - Destination:        â”‚ â”‚      â”‚    from MongoDBâ”‚
â”‚      uploads/:userId/    â”‚ â”‚      â”‚ 2. Return list â”‚
â”‚    - Filename:           â”‚ â”‚      â”‚    (without    â”‚
â”‚      uuid + ext          â”‚ â”‚      â”‚     file paths)â”‚
â”‚                          â”‚ â”‚      â”‚ 3. Include:    â”‚
â”‚ 2. File filter:          â”‚ â”‚      â”‚    - documentIdâ”‚
â”‚    - PDF âœ“               â”‚ â”‚      â”‚    - fileName  â”‚
â”‚    - JPG/PNG âœ“           â”‚ â”‚      â”‚    - fileType  â”‚
â”‚    - GIF âœ“               â”‚ â”‚      â”‚    - fileSize  â”‚
â”‚    - DOC/DOCX âœ“          â”‚ â”‚      â”‚    - category  â”‚
â”‚    - XLS/XLSX âœ“          â”‚ â”‚      â”‚    - uploadDateâ”‚
â”‚    - Others âœ—            â”‚ â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                          â”‚ â”‚               â”‚
â”‚ 3. Size limit:           â”‚ â”‚               â–¼
â”‚    Max 10MB              â”‚ â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚ Display list   â”‚
           â”‚                 â”‚      â”‚ with:          â”‚
           â–¼                 â”‚      â”‚ - Thumbnails   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚ - File info    â”‚
â”‚  BACKEND: Controller     â”‚ â”‚      â”‚ - Actions      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚      â”‚   (view,       â”‚
â”‚ 1. Validate file exists  â”‚ â”‚      â”‚    download,   â”‚
â”‚ 2. Get user from DB      â”‚ â”‚      â”‚    delete)     â”‚
â”‚ 3. Generate documentId   â”‚ â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚    (UUID)                â”‚ â”‚
â”‚ 4. Create document obj:  â”‚ â”‚
â”‚    {                     â”‚ â”‚
â”‚      documentId: uuid,   â”‚ â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      fileName: original, â”‚ â”‚      â”‚ DELETE DOC     â”‚
â”‚      filePath: full path,â”‚ â”‚      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      fileType: mimetype, â”‚ â”‚      â”‚ DELETE         â”‚
â”‚      fileSize: bytes,    â”‚ â”‚      â”‚ /documents/    â”‚
â”‚      category: selected, â”‚ â”‚      â”‚ :documentId    â”‚
â”‚      uploadedAt: now     â”‚ â”‚      â”‚                â”‚
â”‚    }                     â”‚ â”‚      â”‚ Backend:       â”‚
â”‚ 5. Add to user.documents â”‚ â”‚      â”‚ 1. Find user   â”‚
â”‚    array in MongoDB      â”‚ â”‚      â”‚ 2. Find doc    â”‚
â”‚ 6. Save user record      â”‚ â”‚      â”‚    in array    â”‚
â”‚ 7. Return success        â”‚ â”‚      â”‚ 3. Delete file â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚    from disk   â”‚
           â”‚                 â”‚      â”‚ 4. Remove from â”‚
           â–¼                 â”‚      â”‚    MongoDB     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚    array       â”‚
â”‚  File Storage Structure  â”‚ â”‚      â”‚ 5. Save record â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ uploads/                 â”‚ â”‚
â”‚ â”œâ”€â”€ P-abc123/            â”‚ â”‚
â”‚ â”‚   â”œâ”€â”€ uuid-1.pdf       â”‚ â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚   â”œâ”€â”€ uuid-2.jpg       â”‚ â”‚      â”‚ UPDATE DOC     â”‚
â”‚ â”‚   â””â”€â”€ uuid-3.png       â”‚ â”‚      â”‚ METADATA       â”‚
â”‚ â”œâ”€â”€ D-xyz789/            â”‚ â”‚      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”‚   â”œâ”€â”€ uuid-4.pdf       â”‚ â”‚      â”‚ PUT /documents/â”‚
â”‚ â”‚   â””â”€â”€ uuid-5.jpg       â”‚ â”‚      â”‚ :documentId    â”‚
â”‚ â””â”€â”€ IA-def456/           â”‚ â”‚      â”‚                â”‚
â”‚     â””â”€â”€ uuid-6.pdf       â”‚ â”‚      â”‚ Payload:       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚ - category     â”‚
           â”‚                 â”‚      â”‚ - description  â”‚
           â–¼                 â”‚      â”‚                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚ Backend:       â”‚
â”‚  MongoDB User Model      â”‚ â”‚      â”‚ 1. Find doc    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚      â”‚ 2. Update      â”‚
â”‚ {                        â”‚ â”‚      â”‚    metadata    â”‚
â”‚   userId: "P-abc123",    â”‚ â”‚      â”‚ 3. Save record â”‚
â”‚   name: "John Doe",      â”‚ â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚   ...                    â”‚ â”‚
â”‚   documents: [           â”‚ â”‚
â”‚     {                    â”‚ â”‚
â”‚       documentId: uuid-1,â”‚ â”‚
â”‚       fileName: "report",â”‚ â”‚
â”‚       filePath: "uploads/â”‚ â”‚
â”‚                 P-abc123/â”‚ â”‚
â”‚                 uuid.pdf"â”‚ â”‚
â”‚       fileType: "app/pdf"â”‚ â”‚
â”‚       fileSize: 524288,  â”‚ â”‚
â”‚       category: "medical"â”‚ â”‚
â”‚       uploadedAt: date   â”‚ â”‚
â”‚     },                   â”‚ â”‚
â”‚     {...}                â”‚ â”‚
â”‚   ]                      â”‚ â”‚
â”‚ }                        â”‚ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              DOCUMENT SECURITY                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  1. User-specific directories                                    â”‚
â”‚  2. UUID-based filenames (prevents overwrite & guessing)         â”‚
â”‚  3. Authentication required (x-userid header)                    â”‚
â”‚  4. Users can only access their own documents                    â”‚
â”‚  5. File type validation (whitelist approach)                    â”‚
â”‚  6. File size limits (10MB max)                                  â”‚
â”‚  7. Secure file paths (not exposed to frontend)                  â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 10. Blockchain Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              HYPERLEDGER FABRIC DATA FLOW                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      NETWORK TOPOLOGY                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   Organization 1       â”‚      â”‚   Organization 2       â”‚     â”‚
â”‚  â”‚   (Hospital)           â”‚      â”‚   (Insurance)          â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚ Peers:                 â”‚      â”‚ Peers:                 â”‚     â”‚
â”‚  â”‚ - peer0.org1           â”‚      â”‚ - peer0.org2           â”‚     â”‚
â”‚  â”‚ - peer1.org1           â”‚      â”‚ - peer1.org2           â”‚     â”‚
â”‚  â”‚                        â”‚      â”‚                        â”‚     â”‚
â”‚  â”‚ Certificate Authority: â”‚      â”‚ Certificate Authority: â”‚     â”‚
â”‚  â”‚ - ca.org1              â”‚      â”‚ - ca.org2              â”‚     â”‚
â”‚  â”‚                        â”‚      â”‚                        â”‚     â”‚
â”‚  â”‚ Wallets:               â”‚      â”‚ Wallets:               â”‚     â”‚
â”‚  â”‚ - hospitalAdmin.id     â”‚      â”‚ - insuranceAdmin.id    â”‚     â”‚
â”‚  â”‚ - doctor01.id          â”‚      â”‚ - agent01.id           â”‚     â”‚
â”‚  â”‚ - patient01.id         â”‚      â”‚ - Insurance01.id       â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚              â”‚                                â”‚                   â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                           â”‚                                       â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚                  â”‚  Ordering       â”‚                             â”‚
â”‚                  â”‚  Service        â”‚                             â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                           â”‚                                       â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚                  â”‚   Channel       â”‚                             â”‚
â”‚                  â”‚  (mychannel)    â”‚                             â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                           â”‚                                       â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚                  â”‚   Chaincode     â”‚                             â”‚
â”‚                  â”‚ (Smart Contract)â”‚                             â”‚
â”‚                  â”‚  - submitClaim  â”‚                             â”‚
â”‚                  â”‚  - approveClaim â”‚                             â”‚
â”‚                  â”‚  - addRecord    â”‚                             â”‚
â”‚                  â”‚  - grantAccess  â”‚                             â”‚
â”‚                  â”‚  - etc.         â”‚                             â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                           â”‚                                       â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚                  â”‚    Ledger       â”‚                             â”‚
â”‚                  â”‚  - Blocks       â”‚                             â”‚
â”‚                  â”‚  - Transactions â”‚                             â”‚
â”‚                  â”‚  - World State  â”‚                             â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   TRANSACTION FLOW                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Application      â”‚
                    â”‚ (Backend API)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ 1. INVOKE TRANSACTION    â”‚
              â”‚                          â”‚
              â”‚ invoke.invokeTransaction(â”‚
              â”‚   fnName: "submitClaim", â”‚
              â”‚   payload: {...},        â”‚
              â”‚   userId: "P-abc123"     â”‚
              â”‚ )                        â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ 2. GET WALLET IDENTITY   â”‚
              â”‚                          â”‚
              â”‚ - Read wallet from       â”‚
              â”‚   wallet/:userId.id      â”‚
              â”‚ - Extract credentials    â”‚
              â”‚ - Loa